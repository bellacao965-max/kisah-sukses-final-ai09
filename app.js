import function_placeholder_for_module_system || true;
const API_BASE = window.location.origin;function hideLoader(){const l=document.getElementById('loader');if(l)l.style.display='none';}window.addEventListener('load',()=>setTimeout(hideLoader,600));const themeToggle=document.getElementById('themeToggle');if(themeToggle){themeToggle.addEventListener('click',()=>{document.body.classList.toggle('theme-dark');});}async function loadQuote(){try{const r=await fetch(API_BASE+'/api/quote');const j=await r.json();document.getElementById('quoteBox').innerText=j.quote;}catch(e){document.getElementById('quoteBox').innerText='Tidak dapat memuat quote.';}}document.getElementById('refreshQuote').addEventListener('click',loadQuote);function appendMessage(role,text){const wrap=document.getElementById('aiMessages');const row=document.createElement('div');row.className='msg-row '+(role==='user'?'user':'ai');const b=document.createElement('div');b.className='bubble '+(role==='user'?'user':'ai');b.innerText=text;row.appendChild(b);wrap.appendChild(row);wrap.scrollTop=wrap.scrollHeight;}document.getElementById('sendBtn').addEventListener('click',async()=>{const promptEl=document.getElementById('prompt');const prompt=promptEl.value.trim();if(!prompt)return;const model=document.getElementById('modelSelect').value||'';appendMessage('user',prompt);appendMessage('ai','Sedang memproses...');promptEl.value='';try{const res=await fetch(API_BASE+'/api/ai',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt,model})});const j=await res.json();const aiBubbles=document.querySelectorAll('.msg-row.ai .bubble');aiBubbles[aiBubbles.length-1].innerText=j.reply||j.error||'No reply';}catch(e){const aiBubbles=document.querySelectorAll('.msg-row.ai .bubble');aiBubbles[aiBubbles.length-1].innerText='Error: '+(e.message||e);} });const vids=['dQw4w9WgXcQ','3JZ_D3ELwOQ','kXYiU_JCYtU','9bZkp7q19f0','fJ9rUzIMcZQ'];function randomVideo(){document.getElementById('ytPlayer').src='https://www.youtube.com/embed/'+vids[Math.floor(Math.random()*vids.length)];}randomVideo();document.getElementById('randomBtn').addEventListener('click',randomVideo);document.getElementById('searchBtn').addEventListener('click',()=>{const q=document.getElementById('ytSearch').value.trim();if(!q)return randomVideo();window.open('https://www.youtube.com/results?search_query='+encodeURIComponent(q),'_blank');});document.getElementById('tiktokBtn').addEventListener('click',()=>window.open('https://www.tiktok.com','_blank'));document.getElementById('instagramBtn').addEventListener('click',()=>window.open('https://www.instagram.com','_blank'));document.getElementById('facebookBtn').addEventListener('click',()=>window.open('https://www.facebook.com','_blank'));
// Play last AI reply
try{ document.getElementById('playLast').addEventListener('click', function(){ const bubbles=document.querySelectorAll('.msg-row.ai .bubble'); const last = bubbles[bubbles.length-1]; if(last) playTTS(last.innerText); }); }catch(e){}
